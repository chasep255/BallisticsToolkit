<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steel Target Simulator - Physics Testing | Ballistics Toolkit</title>
  <meta name="description" content="Interactive steel target physics simulator. Test realistic target physics with chain constraints, damping, and bullet impacts.">
  <meta name="keywords" content="steel target, physics simulation, target dynamics, shooting simulator, ballistics">
  <link rel="canonical" href="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="og:title" content="Steel Target Simulator - Physics Testing">
  <meta property="og:description" content="Interactive steel target physics simulator with realistic chain dynamics and bullet impacts.">
  <meta property="og:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="twitter:title" content="Steel Target Simulator - Physics Testing">
  <meta property="twitter:description" content="Interactive steel target physics simulator with realistic chain dynamics and bullet impacts.">
  <meta property="twitter:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <link rel="icon" type="image/x-icon" href="../ballistics-toolkit-favicon.ico">
  <link rel="stylesheet" href="../common.css">
  <link rel="stylesheet" href="steel-sim.css">
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Steel Target Simulator",
    "description": "Interactive steel target physics simulator with realistic dynamics",
    "url": "https://www.ballisticstoolkit.com/steel-sim/steel-sim.html",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <script src="../common.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="steel-sim.js"></script>
</head>
<body data-page="steel-sim">
  <div class="nav-header"></div>

  <div class="app-container">
    <h1>üî© Steel Target Simulator</h1>
    <div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px; padding: 12px; margin: 20px 0; color: #856404;">
      <strong>‚ö†Ô∏è Under Construction:</strong> This is currently a physics animation demo showcasing steel target dynamics. Eventually this will be a full shooting range simulator with multiple reactive steel targets.
    </div>

    <!-- Control Buttons -->
    <div class="controls">
      <button id="resetBtn" class="btn btn-primary">Reset All Targets</button>
      <button id="helpBtn" class="btn btn-secondary">Help</button>
    </div>

    <div id="error" class="error" style="display: none;"></div>
    
    <!-- Canvas Container -->
    <div class="canvas-container">
      <canvas id="steelCanvas"></canvas>
      
      <!-- Quick Key Guide -->
      <div class="quick-keys">
        <div class="quick-keys-section">
          <strong>Scope:</strong> Click scope to enter ‚Ä¢ Mouse move to pan ‚Ä¢ <kbd>Wheel</kbd> or <kbd>+</kbd><kbd>-</kbd> Zoom ‚Ä¢ Click to fire ‚Ä¢ <kbd>Esc</kbd> to exit
        </div>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="helpModal" class="help-modal" style="display: none;">
    <div class="help-modal-content">
      <div class="help-modal-header">
        <h2>üî© Steel Target Simulator Help</h2>
        <span class="help-close">&times;</span>
      </div>
      <div class="help-modal-body">
        <div class="help-section" style="padding: 15px 0; border-bottom: 2px solid #ddd; margin-bottom: 20px;">
          <h3 style="margin-top: 0;">Need Help or Found an Issue?</h3>
          <div class="param-help">
            <strong>üìß Email:</strong> <a href="mailto:admin@ballisticstoolkit.com">admin@ballisticstoolkit.com</a><br>
            <strong>üíª GitHub:</strong> <a href="https://github.com/chasep255/BallisticsToolkit" target="_blank" rel="noopener noreferrer">github.com/chasep255/BallisticsToolkit</a>
          </div>
        </div>
        
        <div class="help-section">
          <h3>Controls</h3>
          <div class="param-help">
            <strong>Rifle Scope:</strong><br>
            - Click inside the scope circle to enter scope mode (pointer lock activates)<br>
            - Move mouse to pan/aim the scope (reticle moves with cursor at 1:1 speed)<br>
            - <kbd>Mouse Wheel</kbd> or <kbd>+</kbd>/<kbd>-</kbd> Zoom in/out (4.5X to 30X magnification)<br>
            - Click to fire bullet from scope crosshair (800 m/s / 2625 fps)<br>
            - <kbd>Esc</kbd> to exit scope mode<br>
            - FFP reticle scales with zoom (maintains MRAD subtensions)<br><br>
            
            <strong>Reset All Targets:</strong> Returns all targets to their initial resting positions and clears all velocities and impact history.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Targets & Physics</h3>
          <div class="param-help">
            <strong>Target Racks:</strong> 10 target racks positioned at 100, 200, 300, ..., 1000 yards (every 100 yards). Each rack contains 3 targets with sizes scaling from 6" to 36" based on distance. All targets are 0.25" thick steel with realistic mass calculations.<br><br>
            <strong>Chain Mounting:</strong> Each target has two chains attached at the top, connecting to an overhead beam. Chains act as damped springs (10,000 N/m spring constant, 200 N¬∑s/m damping) that dissipate energy to prevent bouncing.<br><br>
            <strong>Impact Physics:</strong> Bullet impacts transfer momentum to targets. Center hits cause mostly linear motion; edge hits create rotation. Smaller targets respond more dramatically than larger ones.<br><br>
            <strong>Damping:</strong> Linear damping (75% velocity per second) and angular damping (10% angular velocity per second) simulate air resistance and friction.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Visual Effects</h3>
          <div class="param-help">
            <strong>Impact Marks:</strong> Bullet impacts appear as splatter marks on the target texture, with metal showing through the red paint on the side that was hit.<br><br>
            <strong>Dust Effects:</strong> Metallic dust particles (silver-gray) fly back when hitting targets. Brown dust clouds appear when missing and hitting the ground. Particles fade out over time.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Technical Details</h3>
          <div class="param-help">
            <strong>Physics Engine:</strong> Custom rigid body physics in C++ (WebAssembly) with quaternion-based orientation for stable rotations.<br><br>
            <strong>Rendering:</strong> 3-pass composition system: background scene renders to texture, scope renders independently with zoom, then composited with reticle overlay. Three.js WebGL with 4√ó MSAA anti-aliasing. Vertex positions computed in C++ and transferred via typed memory views.<br><br>
            <strong>Scope Reticle:</strong> Geometry-based reticle using Three.js meshes.  FFP behavior scales with zoom, maintaining MRAD subtensions.<br><br>
            <strong>Impact Detection:</strong> Raycasting from scope camera center detects target intersections. Impact points converted to local target coordinates for physics and texture drawing.<br><br>
            <strong>Texture Generation:</strong> Targets use double-width texture buffer: front face UVs map to left half (0-0.5), back face to right half (0.5-1.0), allowing impacts to appear on the correct side.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Limitations</h3>
          <div class="param-help">
            <strong>Simplified Physics:</strong> No collision detection between targets. Targets do not interact with each other.<br><br>
            <strong>Chain Model:</strong> Chains modeled as damped springs without mass or realistic chain link physics. Cannot go slack or wrap around objects.<br><br>
            <strong>Fixed Environment:</strong> Fixed overhead beam. Ground interactions limited to visual dust effects. Wind effects only for dust particles, not bullet trajectories.
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

