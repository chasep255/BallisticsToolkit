<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steel Target Simulator - Interactive Steel Range | Ballistics Toolkit</title>
  <meta name="description" content="Interactive steel range with full ballistics, wind presets, and reactive steel targets from 100 to 1760 yards (1 mile).">
  <meta name="keywords" content="steel target simulator, shooting simulator, long range shooting, 3D shooting game, ballistics simulation, steel target physics, FFP scope, MRAD dials, wind reading, spin drift, crosswind jump, impact detection">
  <link rel="canonical" href="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="og:title" content="Steel Target Simulator - Interactive Steel Range">
  <meta property="og:description" content="Interactive steel range with full ballistics, wind presets, and reactive steel targets from 100 to 1760 yards (1 mile). Shoot with a pointer-lock FFP scope, MRAD dials, and realistic steel target physics with impact marks and dust effects.">
  <meta property="og:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="twitter:title" content="Steel Target Simulator - Interactive Steel Range">
  <meta property="twitter:description" content="Interactive steel range with full ballistics, wind presets, and reactive steel targets from 100 to 1760 yards (1 mile). Shoot with a pointer-lock FFP scope, MRAD dials, and realistic steel target physics with impact marks and dust effects.">
  <meta property="twitter:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <link rel="icon" type="image/x-icon" href="../ballistics-toolkit-favicon.ico">
  <link rel="stylesheet" href="../common.css">
  <link rel="stylesheet" href="steel-sim.css">
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Steel Target Simulator",
    "description": "Interactive steel range with full ballistics, wind presets, and reactive steel targets from 100 to 1760 yards (1 mile).",
    "url": "https://www.ballisticstoolkit.com/steel-sim/steel-sim.html",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <script src="../common.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.180.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.180.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="steel-sim.js"></script>
</head>
<body data-page="steel-sim">
  <div class="nav-header"></div>

  <div class="app-container">
    <h1>ðŸ”© Steel Target Simulator</h1>

    <!-- Bullet Parameters -->
    <div class="params-bar" style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 5px;">
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="mv" title="Muzzle velocity in feet per second">MV (fps)</label>
        <input type="number" id="mv" value="2750" step="10" min="1000" max="5000" title="Muzzle velocity in feet per second" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="bc" title="Ballistic Coefficient (0.001-1.0) - higher values mean better aerodynamics">BC</label>
        <input type="number" id="bc" value="0.311" step="0.001" min="0.001" max="1.0" title="Ballistic Coefficient (0.001-1.0) - higher values mean better aerodynamics" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="dragFunction" title="G7 is recommended for modern bullets, G1 for older data">Drag</label>
        <select id="dragFunction" title="G7 is recommended for modern bullets, G1 for older data" style="width: 100px; padding: 5px; align-self: flex-start;">
          <option value="G1">G1</option>
          <option value="G7" selected>G7</option>
        </select>
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="diameter" title="Bullet diameter in inches">Dia (in)</label>
        <input type="number" id="diameter" value="0.264" step="0.001" min="0.1" max="1.0" title="Bullet diameter in inches" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="weight" title="Bullet weight in grains">Wt (gr)</label>
        <input type="number" id="weight" value="140" step="1" min="10" max="1000" title="Bullet weight in grains" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="length" title="Bullet length in inches">Len (in)</label>
        <input type="number" id="length" value="1.4" step="0.01" min="0.1" max="5.0" title="Bullet length in inches" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="twist" title="Barrel twist rate in inches per turn (e.g., 8 for 1:8 twist)">Twist (in/turn)</label>
        <input type="number" id="twist" value="8.0" step="0.1" min="1" max="20" title="Barrel twist rate in inches per turn (e.g., 8 for 1:8 twist)" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="mvSd" title="Muzzle velocity variation in fps - typical values: 5-15 fps">MV Ïƒ (fps)</label>
        <input type="number" id="mvSd" value="7.0" step="0.5" min="0" max="50" title="Muzzle velocity variation in fps - typical values: 5-15 fps" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="rifleAccuracy" title="Rifle accuracy in MOA (1 MOA â‰ˆ 1 inch at 100 yards)">Accuracy (MOA)</label>
        <input type="number" id="rifleAccuracy" value="0.25" step="0.05" min="0" max="5" title="Rifle accuracy in MOA (1 MOA â‰ˆ 1 inch at 100 yards)" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="windPreset" title="Wind preset">Wind</label>
        <select id="windPreset" title="Wind preset" style="width: 120px; padding: 5px; align-self: flex-start;">
          <option value="Moderate" selected>Moderate</option>
        </select>
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="zeroDistance" title="Zero distance in yards">Zero (yd)</label>
        <input type="number" id="zeroDistance" value="100" step="10" min="25" max="1000" title="Zero distance in yards" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="scopeHeight" title="Scope height above bore in inches">Scope Ht (in)</label>
        <input type="number" id="scopeHeight" value="2.0" step="0.1" min="0.5" max="10.0" title="Scope height above bore in inches" style="width: 100px; padding: 5px; align-self: flex-start;">
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="scopeType" title="Scope type determines reticle and dial units">Scope Type</label>
        <select id="scopeType" title="Scope type determines reticle and dial units" style="width: 100px; padding: 5px; align-self: flex-start;">
          <option value="mrad" selected>MRAD</option>
          <option value="moa">MOA</option>
        </select>
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="opticalEffects" title="Enable heat mirage effect in scopes">Mirage/Optical Effects</label>
        <input type="checkbox" id="opticalEffects" title="Enable heat mirage and depth-of-field effects in scopes" style="width: auto; align-self: flex-start;" checked>
      </div>
      <div class="param-item" style="display: flex; flex-direction: column; gap: 5px;">
        <label for="hunting" title="Enable boars and prairie dogs">Hunting</label>
        <input type="checkbox" id="hunting" title="Enable boars and prairie dogs" style="width: auto; align-self: flex-start;" checked>
      </div>
    </div>

    <!-- Control Buttons -->
    <div class="controls" style="display: flex; align-items: center; gap: 10px; justify-content: center; margin: 15px 0;">
      <button id="startBtn" class="btn btn-primary">Start</button>
      <button id="restartBtn" class="btn btn-secondary" style="display: none;">Restart</button>
      <button id="helpBtn" class="btn btn-secondary">Help</button>
      <button id="fullscreenBtn" class="btn btn-secondary" title="Toggle fullscreen mode" disabled>â›¶ Fullscreen</button>
    </div>

    <div id="error" class="error" style="display: none;"></div>
    
    <!-- Canvas Container -->
    <div class="canvas-container">
      <canvas id="steelCanvas"></canvas>
      
      <!-- Quick Key Guide -->
      <div class="quick-keys">
        <div class="quick-keys-section">
          <strong>Desktop - Scope:</strong> <kbd>Click</kbd> scope to enter â€¢ <kbd>Tab</kbd> switch scopes â€¢ <kbd>Mouse Wheel</kbd> or <kbd>+</kbd>/<kbd>-</kbd> zoom â€¢ <kbd>Click</kbd> to fire â€¢ <kbd>Esc</kbd> exit
        </div>
        <div class="quick-keys-section">
          <strong>Desktop - Dial/Focus:</strong> <kbd>Arrow Keys</kbd> dial â€¢ <kbd>F</kbd> or <kbd>Right-click</kbd> focus active scope (range shown in bottom-right)
        </div>
        <div class="quick-keys-section">
          <strong>Mobile:</strong> Drag to pan â€¢ Pinch to zoom â€¢ Tap to fire â€¢ Long-press inside scope to refocus where you press (when Mirage enabled) â€¢ Dial buttons next to HUD (hold to fast-dial)
        </div>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="helpModal" class="help-modal" style="display: none;">
    <div class="help-modal-content">
      <div class="help-modal-header">
        <h2>ðŸ”© Steel Target Simulator Help</h2>
        <span class="help-close">&times;</span>
      </div>
      <div class="help-modal-body">
        <!-- Contact/Support -->
        <div class="help-section" style="padding: 15px 0; border-bottom: 2px solid #ddd; margin-bottom: 20px;">
          <h3 style="margin-top: 0;">Need Help or Found an Issue?</h3>
          <div class="param-help">
            <strong>ðŸ“§ Email:</strong> <a href="mailto:admin@ballisticstoolkit.com">admin@ballisticstoolkit.com</a><br>
            <strong>ðŸ’» GitHub:</strong> <a href="https://github.com/chasep255/BallisticsToolkit" target="_blank" rel="noopener noreferrer">github.com/chasep255/BallisticsToolkit</a>
          </div>
        </div>
        
        <!-- Overview -->
        <div class="help-section">
          <h3>Overview</h3>
          <p>Steel Target Simulator is an interactive steel range with full ballistics and steel target physics. Shoot at reactive steel racks from 100 to 1760 yards (1 mile) with 4DOF trajectory simulation, wind presets, spin effects, and realistic target responses. Features dual scopes (rifle + spotting), MRAD/MOA dial adjustments, optional heat mirage effects, wind flags, dust/metal effects, and a HUD.</p>
        </div>

        <!-- Quick Start -->
        <div class="help-section">
          <h3>Quick Start</h3>
          <div class="param-help">
            1. Click <strong>Start</strong> to begin<br>
            2. Click inside either <strong>scope</strong> (rifle scope bottom-right, spotting scope bottom-left) to enter aiming mode<br>
            3. <strong>Move mouse</strong> to aim, <strong>click</strong> to fire (rifle scope only)<br>
            4. Use <strong>Tab</strong> to switch between rifle and spotting scopes<br>
            5. Use <strong>arrow keys</strong> to adjust elevation/windage dials<br>
            6. Press <strong>Esc</strong> to exit scope mode
          </div>
        </div>
        
        <!-- Controls -->
        <div class="help-section">
          <h3>Controls</h3>
          <div class="param-help">
            <strong>Desktop - Scope Controls:</strong><br>
            - <kbd>Click</kbd> inside either scope (rifle scope bottom-right, spotting scope bottom-left) to enter scope mode<br>
            - The active scope shows a dull red border to indicate which one you're controlling<br>
            - <kbd>Tab</kbd> Switch between rifle and spotting scopes (only when in scope mode)<br>
            - Move mouse to pan/aim the active scope<br>
            - <kbd>Mouse Wheel</kbd> or <kbd>+</kbd>/<kbd>-</kbd> Zoom in/out the active scope (4Ã— to 40Ã— magnification)<br>
            - <kbd>Click</kbd> to fire (rifle scope only - spotting scope is for observation only)<br>
            - <kbd>Esc</kbd> to exit scope mode (releases pointer lock)<br>
            - FFP reticle scales with zoom (maintains angular subtensions)<br><br>

            <strong>Desktop - Dial Controls:</strong><br>
            - <kbd>ArrowUp</kbd>/<kbd>ArrowDown</kbd> dial elevation (0.1 MRAD or 0.25 MOA; hold <kbd>Shift</kbd> for 1.0)<br>
            - <kbd>ArrowLeft</kbd>/<kbd>ArrowRight</kbd> dial windage (0.1 MRAD or 0.25 MOA; hold <kbd>Shift</kbd> for 1.0)<br>
            - <kbd>R</kbd> reset both dials to zero (only when in rifle scope mode)<br>
            - On-screen dial buttons (U/D/L/R/âŸ²) next to HUD work anytime<br><br>

            <strong>Desktop - Focus/Range Finder:</strong><br>
            - <kbd>F</kbd> or <kbd>Right-click</kbd> refocus the active scope at center crosshair distance<br>
            - Sets the focal distance for mirage and depth-of-field blur effects (when optical effects enabled)<br>
            - Focal distance is always displayed in the bottom-right corner of each scope as a red digital readout (yards)<br>
            - The active scope is indicated by the dull red border<br><br>

            <strong>Mobile/Touch:</strong><br>
            - <strong>Single-finger drag:</strong> Pan the scope view<br>
            - <strong>Pinch:</strong> Zoom in/out (4Ã— to 40Ã— magnification)<br>
            - <strong>Tap:</strong> Fire a shot (rifle scope, quick tap &lt; 150ms)<br>
            - <strong>Long press (â‰ˆ 450ms):</strong> Refocus at press point (requires Mirage enabled)<br>
            - <strong>Dial buttons (U/D/L/R/âŸ²):</strong> Tap or hold for fast-dial<br><br>

            <strong>Fullscreen:</strong><br>
            - Use the Fullscreen button for immersive play<br>
            - Canvas automatically adapts to your screen's aspect ratio<br>
            - <strong>Note:</strong> May not work on iOS Safari. Desktop and Android work best.
          </div>
        </div>
        
        <!-- Gameplay -->
        <div class="help-section">
          <h3>Gameplay</h3>
          <div class="param-help">
            <strong>Target Racks:</strong><br>
            Multiple target racks positioned from 100 to 1760 yards (1 mile) with various target sizes and configurations. Targets include both rectangular and oval shapes with sizes ranging from ~2" chips up to large ~6â€‘ft gongs, roughly spanning 0.5â€“2+ MOA depending on distance and rack configuration.<br><br>
            
            <strong>Target Physics:</strong><br>
            - Each target hangs from two chains (damped springs: 10,000 N/m, 200 NÂ·s/m damping)<br>
            - Bullet impacts transfer momentum to targets<br>
            - Center hits cause mostly linear motion; edge hits create rotation<br>
            - Smaller targets respond more dramatically than larger ones<br><br>

            <strong>Hunting Mode:</strong><br>
            - Enable via the "Hunting" checkbox in settings<br>
            - Must restart game for changes to take effect<br><br>
            
            <strong>Prairie Dogs:</strong><br>
            - Scattered from 100 to 1000 yards, approximately 16 inches tall<br>
            - Randomly pop up and down (roughly 30% up, 70% down)<br>
            - Each state lasts 5-90s seconds before changing<br>
            - When hit: quick upward jump + red mist effect, respawn after ~1 minute<br><br>
            
            <strong>Boars:</strong><br>
            - Spawn randomly between 150-1200 yards<br>
            - Walk randomly across the range, avoiding obstacles<br>
            - When hit: fade out animation and respawn at new random locations<br>
          </div>
        </div>
        
        <!-- Settings -->
        <div class="help-section">
          <h3>Settings</h3>
          <div class="param-help">
            <strong>Ballistic Parameters:</strong><br>
            - <strong>MV:</strong> Muzzle velocity (fps) - critical for trajectory<br>
            - <strong>BC:</strong> Ballistic coefficient - higher = less drift/drop<br>
            - <strong>Drag Function:</strong> G7 (modern boat-tail) or G1 (flat-base/older)<br>
            - <strong>Diameter/Weight/Length:</strong> For spin calculations<br>
            - <strong>Twist:</strong> Barrel twist rate (inches per turn)<br>
            - <strong>MV Ïƒ:</strong> Muzzle velocity standard deviation (fps)<br>
            - <strong>Accuracy:</strong> Rifle+shooter precision in MOA<br>
            - <strong>Zero Distance:</strong> Distance at which rifle is zeroed (yards)<br>
            - <strong>Scope Height:</strong> Height of scope above bore (inches)<br>
            - <strong>Wind Preset:</strong> Controls wind patterns affecting trajectory<br><br>

            <strong>Scope Type (MRAD/MOA):</strong><br>
            - Select in the settings bar to change reticle tick spacing and dial units<br>
            - MRAD mode: 0.5 MRAD minor ticks, 1.0 MRAD major ticks, 0.1 MRAD clicks<br>
            - MOA mode: 2.0 MOA minor ticks, 4.0 MOA major ticks, 0.25 MOA clicks<br>
            - HUD displays dial values in the selected units<br><br>

            <strong>Mirage/Optical Effects:</strong><br>
            - Toggle via the checkbox in the settings bar<br>
            - Simulates realistic heat mirage/shimmer visible through the scope<br>
            - Mirage moves with the windâ€”watch it to read wind direction and speed<br>
            - Higher magnification = stronger mirage (just like a real scope)<br>
            - Farther distances = stronger mirage (more air to look through)<br>
            - Very strong wind reduces mirage visibility (turbulence breaks up pattern)<br>
            - Also includes depth-of-field blur based on focus distance<br>
            - Focus distance is set using <kbd>F</kbd> or <kbd>Right-click</kbd> (displayed as red digital readout in bottom-right of scope)<br>
            - Increases GPU load; turn off on low-power devices<br><br>

            <strong>Hunting:</strong><br>
            - Toggle via the checkbox in the settings bar<br>
            - Enables/disables boars and prairie dogs<br>
            - Must restart game for changes to take effect<br><br>
            - Increases GPU load; turn off on low-power devices<br><br>

            <strong>HUD (Top-Left):</strong><br>
            - <strong>Elevation:</strong> Current dial setting (U = up, D = down)<br>
            - <strong>Windage:</strong> Current dial setting (R = right, L = left)<br>
            - <strong>Impact Status:</strong> "IMPACT" (green) or "MISS" (red)<br>
            - Units displayed match selected Scope Type<br><br>
            
            <strong>Range Finder Display (Bottom-Right of Scope):</strong><br>
            - Shows current focal distance in yards as a red digital readout<br>
            - Updates when you focus using <kbd>F</kbd> or <kbd>Right-click</kbd><br>
            - Always visible in both rifle and spotting scopes<br>
            - The focal distance affects mirage and depth-of-field blur when optical effects are enabled
          </div>
        </div>

        <!-- Tips -->
        <div class="help-section">
          <h3>Tips for Success</h3>
          <div class="param-help">
            - Start with the 100-yard rack to confirm your zero<br>
            - Use wind flags at multiple distances to read wind gradients<br>
            - Watch target movement after impacts to understand hit location<br>
            - Make small dial adjustments for precise corrections<br>
            - Use <kbd>Shift</kbd>+<kbd>Arrow</kbd> for larger adjustments (1.0 MRAD/MOA)<br>
            - Higher BC bullets drift less in the wind<br>
            - Lower MV Ïƒ = more consistent impacts<br>
            - Practice at shorter distances before attempting 1760 yards (1 mile)
          </div>
        </div>

        <!-- Technical Details -->
        <div class="help-section">
          <h3>Technical Details</h3>
          <div class="param-help">
            <strong>Physics Engine:</strong><br>
            - Custom rigid body physics in C++ (WebAssembly) with quaternion-based orientation<br>
            - Targets use momentum transfer with linear and angular damping<br><br>

            <strong>Rendering:</strong><br>
            - 3-pass composition: background scene â†’ scope with zoom â†’ reticle overlay<br>
            - Three.js WebGL with 4Ã— MSAA anti-aliasing<br>
            - Vertex positions computed in C++ and transferred via typed memory views<br><br>

            <strong>Impact Detection:</strong><br>
            - Spatial binning system (10m bins) for efficient collision detection<br>
            - Raycasting from trajectory segments detects target intersections<br><br>

            <strong>Mirage Model:</strong><br>
            - 3D simplex noise sampled on a sphere around the shooter in angular coordinates<br>
            - Noise advected horizontally by crosswind at focal distance, with upward drift for rising heat<br>
            - Multi-octave noise (fast + slow) creates fine shimmer and larger wave structures<br>
            - Causes both image distortion (UV displacement) and brightness shading<br>
            - Attenuation factors: distance to focal plane, magnification, focal distance, wind speed<br>
            - Wind sampled at 80%, 90%, and 100% of focal distance and averaged<br><br>

            <strong>Depth-of-Field Model:</strong><br>
            - Thin-lens circle of confusion (CoC): CoC = |(FÂ²/(NÂ·(df-F)))Â·((d-df)/d)|<br>
            - Lens: 56mm objective, focal length and f-number derived from FOV/zoom<br>
            - Separable Gaussian blur (horizontal + vertical passes) for O(2n) performance<br>
            - Depth texture from scene render, decoded using THREE.js perspective depth<br>
            - Default focus: 100 yards; blur scales with zoom level<br>
            - Resolution-independent calculations for consistent appearance
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

