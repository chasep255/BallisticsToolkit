<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steel Target Simulator - Physics Testing | Ballistics Toolkit</title>
  <meta name="description" content="Interactive steel target physics simulator. Test realistic target physics with chain constraints, damping, and bullet impacts.">
  <meta name="keywords" content="steel target, physics simulation, target dynamics, shooting simulator, ballistics">
  <link rel="canonical" href="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="og:title" content="Steel Target Simulator - Physics Testing">
  <meta property="og:description" content="Interactive steel target physics simulator with realistic chain dynamics and bullet impacts.">
  <meta property="og:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.ballisticstoolkit.com/steel-sim/steel-sim.html">
  <meta property="twitter:title" content="Steel Target Simulator - Physics Testing">
  <meta property="twitter:description" content="Interactive steel target physics simulator with realistic chain dynamics and bullet impacts.">
  <meta property="twitter:image" content="https://www.ballisticstoolkit.com/ballistics-toolkit-logo.png">
  
  <link rel="icon" type="image/x-icon" href="../ballistics-toolkit-favicon.ico">
  <link rel="stylesheet" href="../common.css">
  <link rel="stylesheet" href="steel-sim.css">
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Steel Target Simulator",
    "description": "Interactive steel target physics simulator with realistic dynamics",
    "url": "https://www.ballisticstoolkit.com/steel-sim/steel-sim.html",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <script src="../common.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="steel-sim.js"></script>
</head>
<body data-page="steel-sim">
  <div class="nav-header"></div>

  <div class="app-container">
    <h1>üî© Steel Target Simulator</h1>
    <div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px; padding: 12px; margin: 20px 0; color: #856404;">
      <strong>‚ö†Ô∏è Under Construction:</strong> This is currently a physics animation demo showcasing steel target dynamics. Eventually this will be a full shooting range simulator with multiple reactive steel targets.
    </div>

    <!-- Control Buttons -->
    <div class="controls">
      <button id="resetBtn" class="btn btn-primary">Reset All Targets</button>
      <button id="helpBtn" class="btn btn-secondary">Help</button>
    </div>

    <div id="error" class="error" style="display: none;"></div>
    
    <!-- Canvas Container -->
    <div class="canvas-container">
      <canvas id="steelCanvas"></canvas>
      <div class="canvas-instructions">Click on the target to simulate bullet impact</div>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="helpModal" class="help-modal" style="display: none;">
    <div class="help-modal-content">
      <div class="help-modal-header">
        <h2>üî© Steel Target Simulator Help</h2>
        <span class="help-close">&times;</span>
      </div>
      <div class="help-modal-body">
        <div class="help-section" style="padding: 15px 0; border-bottom: 2px solid #ddd; margin-bottom: 20px;">
          <h3 style="margin-top: 0;">Need Help or Found an Issue?</h3>
          <div class="param-help">
            <strong>üìß Email:</strong> <a href="mailto:admin@ballisticstoolkit.com">admin@ballisticstoolkit.com</a><br>
            <strong>üíª GitHub:</strong> <a href="https://github.com/chasep255/BallisticsToolkit" target="_blank" rel="noopener noreferrer">github.com/chasep255/BallisticsToolkit</a>
          </div>
        </div>
        
        <div class="help-section">
          <h3>Quick Start</h3>
          <p>Click anywhere on a steel target to simulate a bullet impact. Watch the realistic physics simulation as the target swings and rotates based on where you hit it. The demo features 4 different targets to showcase various physics behaviors.</p>
        </div>
        
        <div class="help-section">
          <h3>Controls</h3>
          <div class="param-help">
            <strong>Left Click:</strong> Simulate a bullet impact at the clicked location. The target will respond with realistic physics based on the impact point, including both linear motion and rotation. Bullet velocity is 800 m/s from the camera position.<br><br>
            <strong>Reset All Targets:</strong> Returns all targets to their initial resting positions and clears all velocities and impact history. Targets are recreated fresh.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Target Configuration</h3>
          <div class="param-help">
            <strong>Demo Targets:</strong> The demo features 4 steel targets: 6" circle, 18"√ó30" rectangle, 12" circle, and 12"√ó18" rectangle. All targets are 0.5" thick steel with realistic mass calculations based on dimensions.<br><br>
            <strong>Chain Mounting:</strong> Each target has two chains attached at the top corners (rectangles) or at 45¬∞ angles (circles), connecting to an overhead beam. Chains act as springs with 10,000 N/m spring constant.<br><br>
            <strong>Chain Dynamics:</strong> Chains have rest lengths calculated from the initial attachment positions. As targets move, chains stretch and apply restoring forces, creating realistic swinging behavior.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Physics Simulation</h3>
          <div class="param-help">
            <strong>Rigid Body Physics:</strong> Targets are simulated as rigid bodies with position, orientation (quaternion), linear velocity, and angular velocity. Mass and inertia tensor (simplified diagonal) are calculated automatically from target dimensions and steel density.<br><br>
            <strong>Impact Physics:</strong> Bullet impacts transfer momentum to the target using impulse calculations. The exact response depends on where you hit the target relative to its center of mass. Impacts off-center create both linear motion and rotation.<br><br>
            <strong>Chain Constraints:</strong> Chains apply spring forces based on their current length versus rest length. Forces are applied at the attachment points, creating both linear and rotational effects.<br><br>
            <strong>Damping:</strong> Linear damping (75% velocity remaining per second) and angular damping (10% angular velocity remaining per second) simulate air resistance and internal friction. Angular damping is much higher to reduce excessive rotation. Damping is applied proportionally to the time step for consistent behavior.<br><br>
            <strong>Time Stepping:</strong> Physics uses variable time steps with subdivision (max 0.01s substeps, max 1.0s total) for stability. Multiple substeps ensure accurate integration even with large time steps.
          </div>
        </div>
        
        <div class="help-section">
          <h3>What to Observe</h3>
          <div class="param-help">
            <strong>Center Hits:</strong> Hitting near the center of mass causes mostly linear motion with minimal rotation. The target swings back and forth like a pendulum.<br><br>
            <strong>Edge Hits:</strong> Hitting near the edges causes significant rotation as well as linear motion. Watch how the target spins while swinging.<br><br>
            <strong>Different Target Sizes:</strong> Smaller targets (6" circle) respond more dramatically to impacts than larger ones (18"√ó30" rectangle) due to their lower mass and inertia.<br><br>
            <strong>Chain Dynamics:</strong> Watch how the chains stretch and pull the target back, creating oscillating motion.<br><br>
            <strong>Impact Visualization:</strong> Bullet impacts are drawn on the target texture as splatter marks. Impacts appear on the side that was hit (front or back), with metal showing through the red paint.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Technical Details</h3>
          <div class="param-help">
            <strong>Physics Engine:</strong> Custom rigid body physics implemented in C++ and compiled to WebAssembly for high performance. Uses quaternion-based orientation representation for stable rotations.<br><br>
            <strong>Rendering:</strong> Three.js WebGL rendering with dynamic geometry updates. Vertex positions are computed in C++ and transferred via typed memory views for zero-copy efficiency. Textures are generated procedurally in C++ and updated incrementally as impacts occur.<br><br>
            <strong>Chain Physics:</strong> Chains are modeled as ideal springs with rest lengths calculated from initial positions. Forces are applied at attachment points in world coordinates, with local attachment points transformed using the target's current orientation.<br><br>
            <strong>Impact Detection:</strong> Raycasting from camera through mouse position detects target intersections. Impact points are converted to local target coordinates for physics calculations and texture drawing.<br><br>
            <strong>Texture Generation:</strong> Targets use a single texture buffer that is twice as wide, with front face UVs mapping to the left half (0-0.5) and back face UVs mapping to the right half (0.5-1.0). This allows impacts to appear on the correct side.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Limitations</h3>
          <div class="param-help">
            <strong>Simplified Physics:</strong> The simulation uses simplified rigid body physics without advanced collision detection between targets or complex material properties. Targets do not interact with each other.<br><br>
            <strong>Chain Model:</strong> Chains are modeled as ideal springs without mass or realistic chain link physics. They cannot go slack or wrap around objects. Damping is applied to the target's motion, not to the chains themselves.<br><br>
            <strong>Fixed Environment:</strong> The simulation assumes a fixed overhead beam and does not model ground interactions, wind effects, or other environmental factors.<br><br>
            <strong>Demo Scope:</strong> This is currently a physics animation demo. Future versions will include full shooting range simulation with multiple scenarios and scoring.
          </div>
        </div>
        
        <div class="help-section">
          <h3>Future Plans</h3>
          <div class="param-help">
            This demo showcases the physics animation capabilities. Eventually, this will expand to a full shooting range simulator with multiple reactive steel targets, realistic shooting scenarios, and support for various target configurations and shooting disciplines.
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

